# 路由树的实现逻辑

介绍完了Engine是如何实现路由和中间件之后，要回到那颗路由树，也就是`engine.trees`本身。

`ServeMux`使用一map做路由注册。那路由匹配的时候，时间复杂度是O(1)的，按说速度已经很快了。但是map只做的了静态路由。可以对于restful风格的接口，很多参数就是在path中的，这时候map就无能为力了。比如：

- 查询用户信息，path是：/user/1，请求方式是GET。其中1是用户id，是可变的，map无法做匹配。

`gin`使用的基数树（Radix Tree），也叫压缩前缀树（Trie）。接下来会先介绍前缀树的逻辑，然后再回到`gin`的实现上来。







现有一组路由

```
1 /user/login
2 /user/logout
3 /subject/name
4 /subject/name/age
5 /subject/:id/name
```







路由冲突问题



Query



Param



Form



Json





# Context

Context用于传递业务参数之外的信息

但是标准库似乎有一些偏差，标准库最主要的功能是取消goroutine的执行







context 取消协程
